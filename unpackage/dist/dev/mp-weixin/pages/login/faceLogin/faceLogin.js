(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/faceLogin/faceLogin"],{237:function(e,n,t){"use strict";(function(e,n){var a=t(4);t(26);a(t(25));var r=a(t(238));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t(1)["default"],t(2)["createPage"])},238:function(e,n,t){"use strict";t.r(n);var a=t(239),r=t(241);for(var c in r)["default"].indexOf(c)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(c);t(243);var o,u=t(32),s=Object(u["default"])(r["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],o);s.options.__file="pages/login/faceLogin/faceLogin.vue",n["default"]=s.exports},239:function(e,n,t){"use strict";t.r(n);var a=t(240);t.d(n,"render",(function(){return a["render"]})),t.d(n,"staticRenderFns",(function(){return a["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return a["recyclableRender"]})),t.d(n,"components",(function(){return a["components"]}))},240:function(e,n,t){"use strict";var a;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return o})),t.d(n,"recyclableRender",(function(){return c})),t.d(n,"components",(function(){return a}));var r=function(){var e=this,n=e.$createElement;e._self._c},c=!1,o=[];r._withStripped=!0},241:function(e,n,t){"use strict";t.r(n);var a=t(242),r=t.n(a);for(var c in a)["default"].indexOf(c)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(c);n["default"]=r.a},242:function(e,n,t){"use strict";(function(e,a){var r=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=r(t(50)),o=r(t(52)),u=r(t(53)),s={data:function(){return{src:"",username:"123",faceBase:""}},methods:{getImageBase64_canvas:function(n){var t=this;return(0,o.default)(c.default.mark((function n(){var r,o,u,s;return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t.src),n.next=3,e.getImageInfo({src:t.src});case 3:return r=n.sent,o=r.width,u=r.height,n.next=8,new Promise((function(n){var a=e.createSelectorQuery();a.select("#myCanvas").fields({node:!0}).exec((function(e){var a=e[0].node,r=a.getContext("2d"),c=a.createImage();console.log(c),c.src=t.src,c.onload=function(){r.drawImage(c,0,0,o,u),n(a.toDataURL())}}))}));case 8:s=n.sent,t.faceBase=s?s.slice(22):0,a.setStorage({key:"base64_",data:t.faceBase,success:function(){console.log("success")}});case 11:case"end":return n.stop()}}),n)})))()},takePhoto:function(){var e=this,n=a.createCameraContext();n.takePhoto({quality:"high",success:function(n){e.src=n.tempImagePath}})},error:function(e){console.log(e.detail)},Login:function(e){var n=this;return(0,o.default)(c.default.mark((function e(){var t,r,o;return c.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.takePhoto(),e.next=3,n.getImageBase64_canvas();case 3:return t={faceBase:n.faceBase,setMyHeaderxxx:{"content-type":"application/x-www-form-urlencoded",accept:"application/json"},unToken:!0},a.showLoading({title:"Loading"}),e.next=7,a.$http.post(u.default.host+"/face/login",t);case 7:if(r=e.sent,o=r.data,"1"!=o.code){e.next=12;break}return console.log(o.message),e.abrupt("return");case 12:a.showToast({title:"失败",duration:2e3,icon:"none"});case 13:case"end":return e.stop()}}),e)})))()}}};n.default=s}).call(this,t(1)["default"],t(2)["default"])},243:function(e,n,t){"use strict";t.r(n);var a=t(244),r=t.n(a);for(var c in a)["default"].indexOf(c)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(c);n["default"]=r.a},244:function(e,n,t){}},[[237,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/login/faceLogin/faceLogin.js.map